<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Web Watcher</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body { font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans"; margin: 24px; }
    h1 { font-size: 22px; }
    form { display: grid; gap: 12px; max-width: 760px; }
    label { font-weight: 600; }
    input, textarea { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 10px; }
    button { padding: 10px 14px; border-radius: 10px; border: 0; cursor: pointer; }
    .primary { background: black; color: white; }
    .card { border: 1px solid #eee; padding: 16px; border-radius: 14px; margin-top: 20px; }
    table { width: 100%; border-collapse: collapse; }
    th, td { padding: 8px; border-bottom: 1px solid #f0f0f0; text-align: left; vertical-align: top; }
    .row-actions { display: flex; gap: 8px; }
    .muted { color: #666; font-size: 13px; }
    .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }

    /* Modal */
    .modal-backdrop {
      position: fixed; inset: 0; background: rgba(0,0,0,0.45);
      display: none; align-items: center; justify-content: center; z-index: 9999;
    }
    .modal {
      background: #fff; width: min(920px, 94vw); max-height: 90vh;
      border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      display: grid; grid-template-rows: auto 1fr; overflow: hidden;
    }
    .modal header {
      display: flex; justify-content: space-between; align-items: center;
      padding: 12px 16px; border-bottom: 1px solid #eee;
    }
    .modal .content {
      display: grid; grid-template-columns: 1fr 360px; gap: 16px;
      padding: 16px; overflow: auto;
    }
    .modal .imgwrap {
      display: grid; place-items: center; background: #fafafa; border: 1px solid #eee; border-radius: 12px; padding: 8px; min-height: 360px;
    }
    .modal img { max-width: 100%; height: auto; }
    .modal pre {
      white-space: pre-wrap; word-break: break-word; background: #fafafa;
      border: 1px solid #eee; border-radius: 12px; padding: 12px; margin: 0;
      max-height: 70vh; overflow: auto;
    }
    .hidden { display: none; }
  </style>
</head>
<body>
  <h1>Web Watcher</h1>
  <p class="muted">
    Poll a webpage on an interval, capture a screenshot, extract text (DOM → OCR fallback),
    and optionally ping a Discord webhook when text matches or a price is ≤ your threshold.
  </p>

  <form method="post" action="/
